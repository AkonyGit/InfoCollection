var strjson={};var bdcTrace_request_url="https://trace.hexun.com";var ipGif=bdcTrace_request_url+"/bdcTrace/pageload.gif?";strjson.pageopentime=CurentTime();var JSON=window.JSON;if(!JSON){JSON={}}if(!JSON.stringify){var hasOwn=({}).hasOwnProperty;function isPlainObject(obj){var key;if(!obj||_getConstructorName(obj).toLowerCase()!="object"){return false}try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}for(key in obj){}return key===undefined||hasOwn.call(obj,key)}function _getConstructorName(o){if(o!=null&&o.constructor!=null){return Object.prototype.toString.call(o).slice(8,-1)}else{return""}}function _mulReplace(s,arr){for(var i=0;i<arr.length;i++){s=s.replace(arr[i][0],arr[i][1])}return s}function _escapeChars(s){return _mulReplace(s,[[/\\/g,"\\\\"],[/"/g,'\\"'],[/\r/g,"\\r"],[/\n/g,"\\n"],[/\t/g,"\\t"]])}function _type(obj){var type=_getConstructorName(obj).toLowerCase();switch(type){case"string":return'"'+_escapeChars(obj)+'"';case"number":var ret=obj.toString();return/N/.test(ret)?"null":ret;case"boolean":return obj.toString();case"date":return"new Date("+obj.getTime()+")";case"array":var ar=[];for(var i=0;i<obj.length;i++){ar[i]=_stringify(obj[i])}return"["+ar.join(",")+"]";case"object":if(isPlainObject(obj)){ar=[];for(i in obj){ar.push('"'+_escapeChars(i)+'":'+_stringify(obj[i])+"")}return"{"+ar.join(",")+"}"}}return"null"}function _capitalize(val){return val[0].toUpperCase()+val.substr(1)}function _stringify(obj){if(obj==null){return"null"}if(obj.toJSON){return obj.toJSON()}return _type(obj)}JSON.stringify=_stringify}var sessionid=getCookie("JSESSIONID");if(sessionid==null||sessionid==""){var sessionid_tem=getCookie("BDCSESSIONID");var mytime=sessionid_tem.substring(11);if(sessionid_tem==null||sessionid_tem==""||isTimeOut(mytime)){sessionid=createHexunSession();document.cookie=setCookie("BDCSESSIONID",sessionid,null)}else{sessionid=sessionid_tem}}function isTimeOut(sessiontime){var nowtime=new Date().getTime();var datetime=nowtime-sessiontime;var leave=datetime%(3600*1000);var minutes=Math.floor(leave/(60*1000));if(minutes>=60){return true}else{return false}}function createHexunSession(){var sessiontime=new Date().getTime();var sessionid=getRandomString(11)+sessiontime;return sessionid}function getRandomString(len){len=len||32;var chars="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz";var maxPos=chars.length;var pwd="";for(i=0;i<len;i++){pwd+=chars.charAt(Math.floor(Math.random()*maxPos))}return pwd}strjson.bdcsessionid=sessionid;var Site_CookieId="";var Site_userId="";var strcookie=document.cookie;var arrcookie=strcookie.split(";");if(arrcookie.length>=1){for(var i=0;i<arrcookie.length;i++){if(Site_CookieId!=""){break}var myarrcookie=arrcookie[i];var flag=myarrcookie.indexOf("JSESSIONID")<0&&myarrcookie.indexOf("BAIDUID")<0&&myarrcookie.indexOf("BDCSESSIONID")<0&&myarrcookie.indexOf("fsp_cust_id")<0;if(flag){Site_CookieId==""&&(Site_CookieId=getKeyId(myarrcookie,"SID"));Site_CookieId==""&&(Site_CookieId=getKeyId(myarrcookie,"emstat_bc_emcount"))}}for(var i=0;i<arrcookie.length;i++){if(Site_userId!=""){break}var myarrcookie=arrcookie[i];var flag=myarrcookie.indexOf("JSESSIONID")<0&&myarrcookie.indexOf("BAIDUID")<0&&myarrcookie.indexOf("BDCSESSIONID")<0;if(myarrcookie.indexOf("userToken")==0){Site_userId=getKeyId(myarrcookie,"");break}if(flag){Site_userId==""&&(Site_userId=getKeyId(myarrcookie,"fsp_cust_id"))}}}function getKeyId(mycookie,searchIdName){var index=-2;var c_start=mycookie.indexOf(searchIdName+"=");if(c_start!=-1){c_end=mycookie.indexOf(";",c_start);if(c_end==-1){c_end=mycookie.length}var subcookie=mycookie.substring(c_start,c_end);index=subcookie.indexOf("&");if(index>=0){subcookie=subcookie.substring(0,index)}index=subcookie.indexOf("|");if(index>=0){subcookie=subcookie.substring(0,index)}index=subcookie.indexOf("%");if(index>=0){subcookie=subcookie.substring(0,index)}index=subcookie.indexOf("=");if(index>=0){subcookie=subcookie.substring(index+1,subcookie.length)}index=subcookie.indexOf(":");if(index>=0){subcookie=subcookie.substring(index+1,subcookie.length)}if(subcookie!=null||subcookie.length>0){return subcookie}}return""}if(Site_CookieId==null||Site_CookieId==""){Site_CookieId="-"}strjson.siteCookieId=Site_CookieId;if(Site_userId==null||Site_userId==""){Site_userId="-"}strjson.siteUserId=Site_userId;function forIn(obj,handler){for(var i in obj){if(obj.hasOwnProperty(i)){handler(i,obj[i])}}}function each(arr,handler){for(var i=0,len=arr.length;i<len;i+=1){handler(i,arr[i])}}function getXMLHttpRequest(){if(window.XDomainRequest){return new XDomainRequest()}if(window.XMLHttpRequest){return new XMLHttpRequest()}else{var names=["msxml","msxml2","msxml3","Microsoft"];for(var i=0;i<names.length;i++){try{var name=names[i]+".XMLHTTP";return new ActiveXObject(name)}catch(e){}}}return null}var xmlHttp=getXMLHttpRequest();function sendAjaxRequest(url){try{var dom=new Image(1,1);var rnd_id="_img_"+Math.random();
window[rnd_id]=dom;dom.onload=dom.onerror=function(){window[rnd_id]=null};dom.style.display="none";dom.style.width="0px";dom.style.height="0px";dom.src=url;document.body.appendChild(dom)}catch(e){console.log("sendAjaxRequest,'"+url+"',"+e.message)}}function getCookie(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""}function setCookie(c_name,value,expiremins){var exdate=new Date();if(expiremins!=null){exdate.setMinutes(exdate.getMinutes()+expiremins)}document.cookie=c_name+"="+escape(value)+((expiremins==null)?"":"; expires="+exdate.toGMTString())}function getTimeRndString(){var tm=new Date();var str1=tm.getMilliseconds()+tm.getSeconds()*60+tm.getMinutes()*3600+tm.getHours()*60*3600+tm.getDay()*3600*24+tm.getMonth()*3600*24*31+tm.getYear()*3600*24*31*12;return getRandomString(8)+str1}var BDC_UserId="";strjson.channel="-";strjson.imei="-";function checkCookie(){BDC_UserId=getCookie("BDCCOOKIEID");var dateStr=CurentTime();var cuturl=window.location.href;if(BDC_UserId==null||BDC_UserId==""){BDC_UserId=getTimeRndString();if(BDC_UserId!=null&&BDC_UserId!=""){setCookie("BDCCOOKIEID",BDC_UserId,365*24*10)}}if(BDC_UserId!=null&&BDC_UserId!=""){var triggertime=CurentTime();strjson.screenratio=window.screen.height+","+window.screen.width;strjson.bdccookieid=BDC_UserId;strjson.ref=urlReplace(document.referrer||"-");strjson.projectid=hexunGetProductId();strjson.r=Math.ceil(Math.random()*100000000);var jsonResult="";var dataList=[];if(Object.getOwnPropertyNames){dataList=Object.getOwnPropertyNames(strjson)}else{for(key in strjson){dataList.push(key)}}for(var i=0;i<dataList.length;i++){jsonResult+=dataList[i]+"="+eval("strjson."+dataList[i])+"&"}jsonResult=jsonResult.substring(0,jsonResult.length-1);url=ipGif+jsonResult;sendAjaxRequest(url)}}if(document.all){window.attachEvent("onload",checkCookie);window.attachEvent("unload",function(event){var now=+new Date;while(new Date-now>=10){}})}else{window.addEventListener("load",checkCookie,false);window.addEventListener("unload",function(event){var now=+new Date;while(new Date-now>=10){}})}console.log(1);var focusTime=0;var timer;window.onfocus=onFocus;window.onblur=onBlur;window.onfocusin=onFocus;window.onfocusout=onBlur;if(isBrower("Chrome")){timer=setInterval("getSinglefocusTime()",1000)}function onBlur(){clearInterval(timer)}function onFocus(){clearInterval(timer);timer=setInterval("getSinglefocusTime()",1000)}function getSinglefocusTime(){focusTime=focusTime+1}function isBrower(BrowerName){var userAgent=navigator.userAgent;if(userAgent.indexOf(BrowerName)>0){return true}return false}function CurentTime(){var now=new Date();var year=now.getFullYear();var month=now.getMonth()+1;var day=now.getDate();var hour=now.getHours();var minu=now.getMinutes();var sec=now.getSeconds();var millsec=now.getUTCMilliseconds();if(month<10){month="0"+month}if(day<10){day="0"+day}if(hour<10){hour="0"+hour}if(minu<10){minu="0"+minu}if(sec<10){sec="0"+sec}var val=year+""+month+""+day+""+hour+""+minu+""+sec;return val}function urlReplace(url){return url.replace(/\&/g,"\001").replace(/\#/g,"\002")}function hexunGetProductId(){var _product_id;if(typeof(hx_bdcTrace_projectid)!="undefined"&&hx_bdcTrace_projectid!=null){return hx_bdcTrace_projectid}else{if(document.getElementById("_product_id")){_product_id=document.getElementById("_product_id").title}else{_product_id=""}}return _product_id};